dygraph(c)
c<- ts(data=c, start =c(2010,1), frequency=365)
dygraph(c)
c<- ts(data=c, start =c(1990,1), frequency=365)
dygraph(c)
decompose(c)
c<- ts(data=c, start =c(1990,1), frequency=12)
dygraph(c)
dygraph(c)
c <- as.xts(c)
class(c)
?as.xts(0)
decompose(c)
dygraph(c)
View(c)
dygraph(c)
plot(c_dcomp)
c_dcomp<-decompose(c)
plot(c_dcomp)
class(c)
?as.xts(0)
c<-b$total_conversions
c <- as.xts(c)
c<- ts(data=c, start =c(1990,1), frequency=12)
c <- as.xts(c)
dygraph(c)
c<- ts(data=c, start =c(1990,1), frequency=365)
c <- as.xts(c)
View(b)
View(b)
c <- as.xts(b,order.by=conversion_day)
c <- as.xts(b,order.by=conversion_day)
c <- as.xts(b,order.by=b$conversion_day)
?xts()
Y_new <- xts(x = b[,-1], order.by = b$conversion_day]
Y_new <- xts(x = b[,-1], order.by = b$conversion_day)
View(Y_new)
dygraph(Y_new)
Y_new <- xts(b$total_conversions = b[,-1], order.by = b$conversion_day)
install.packages("devtools") # if not installed
library(devtools)
find_rtools()
install_github("tesseradata/datadr")
install_github("tesseradata/trelliscope")
devtools::install_github("hafen/housingData")
library(housingData)
library(datadr); library(trelliscope)
head(housing)
byCounty <- divide(housing,
by = c("county", "state"), update = TRUE)
summary(byCounty)
priceQ <- drQuantile(byCounty,
var = "medListPriceSqft")
xyplot(q ~ fval, data = priceQ,
scales = list(y = list(log = 10)))
hyundai <- read.csv(hyundai_data.csv)
wd()
wd
hyundai <- read.csv(hyundai_data.csv)
hyundai <- read.csv(file="hyundai_data.csv")
View(hyundai)
#convert newly created yearmon field to POSTIXlt
hyundai$Date <- strptime(
hyundai$Date
, "%Y-%m-%d"
)
View(hyundai)
# load data
hyundai <- read.csv(file="hyundai_data.csv")
View(hyundai)
View(hyundai)
#convert newly created yearmon field to POSTIXlt
hyundai$Date <- strptime(
hyundai$Date
, "%m-%d-%Y"
)
View(hyundai)
# load data
hyundai <- read.csv(file="hyundai_data.csv")
?strptime
View(hyundai)
#convert newly created yearmon field to POSTIXlt
hyundai$Date <- strptime(
hyundai$Date
, "%m-%d-%Y"
)
View(hyundai)
# load data
hyundai <- read.csv(file="hyundai_data.csv")
View(hyundai)
View(hyundai)
?substr()
substr("abcdef", 2, 4)
substr("abcdef", 1, 4)
hyundai$market_code<-substr(hyundai$Placement,1,3)
levels(hyundai$market_code)
View(hyundai)
?merge()
hyundai_lookup<-read.csv(file="hyundai_lookup.csv")
hyundai_lookup<-read.csv(file="hyundai_lookup.csv")
hyundai_lookup <- read.csv("C:/Users/john/Google Drive/R Directory/My R Data/hyundai_lookup.csv")
View(hyundai_lookup)
hyundai_lookup <- read.csv("My R Data/hyundai_lookup.csv")
View(hyundai)
View(hyundai)
hyundai_lookup <- read.csv("My R Data/hyundai_lookup.csv")
?if()
if()
?merge()
View(hyundai_lookup)
authors <- data.frame(
surname = I(c("Tukey", "Venables", "Tierney", "Ripley", "McNeil")),
nationality = c("US", "Australia", "US", "UK", "Australia"),
deceased = c("yes", rep("no", 4)))
books <- data.frame(
name = I(c("Tukey", "Venables", "Tierney",
"Ripley", "Ripley", "McNeil", "R Core")),
title = c("Exploratory Data Analysis",
"Modern Applied Statistics ...",
"LISP-STAT",
"Spatial Statistics", "Stochastic Simulation",
"Interactive Data Analysis",
"An Introduction to R"),
other.author = c(NA, "Ripley", NA, NA, NA, NA,
"Venables & Smith"))
(m1 <- merge(authors, books, by.x = "surname", by.y = "name"))
View(books)
View(`m1`)
View(`m1`)
hyundai_data <- read.csv(file="hyundai_data.csv")
rm(hyundai)
hyundai$market_code<-substr(hyundai$Placement,1,3)
View(hyundai_lookup)
m2<-merge(x=hyundai_data,y=hyundai_lookup,by.x="market_code",by.y="Code")
hyundai$market_code<-substr(hyundai$Placement,1,3)
hyundai_data$market_code<-substr(hyundai$Placement,1,3)
hyundai_data$market_code<-substr(hyundai_data$Placement,1,3)
m2<-merge(x=hyundai_data,y=hyundai_lookup,by.x="market_code",by.y="Code")
View(`m2`)
View(hyundai_lookup)
View(hyundai_data)
factors(hyundai_data$market_code)
unique(hyundai_data$market_code)
if(hyundai_data$Year=2014)
{ hyundai_data$market_code2<-substr(hyundai_data$Placement,1,3)
} else if(hyundai_data$Year=2015) {
hyundai_data$market_code2<-substr(hyundai_data$Placement,1,3)
}
if(hyundai_data$Year=2014)
{ hyundai_data$market_code2<-substr(hyundai_data$Placement,1,3)
} else {if(hyundai_data$Year=2015)
hyundai_data$market_code2<-substr(hyundai_data$Placement,1,3)
} else {hyundai_data$market_code2<-"NA"}
if(hyundai_data$Year=2014)
{ hyundai_data$market_code2<-substr(hyundai_data$Placement,1,3)
}
if(hyundai_data$Year=2014)
{ hyundai_data$market_code2<-substr(hyundai_data$Placement,1,3)
} else {if(hyundai_data$Year=2015){
hyundai_data$market_code2<-substr(hyundai_data$Placement,1,3)
} else {hyundai_data$market_code2<-"NA"}
if(hyundai_data$Year=2014)
{ hyundai_data$market_code2<-substr(hyundai_data$Placement,1,3)
} else if(hyundai_data$Year=2015){
hyundai_data$market_code2<-substr(hyundai_data$Placement,1,3)
} else {hyundai_data$market_code2<-"NA"}
if(hyundai_data$Year=2014)
{ hyundai_data$market_code2<-substr(hyundai_data$Placement,1,3)
}
if(hyundai_data$Year=2014)
{ hyundai_data$market_code2<-substr(hyundai_data$Placement,1,3)
} else {
if(hyundai_data$Year=2015)
{hyundai_data$market_code2<-substr(hyundai_data$Placement,1,3)
}
if(hyundai_data$Year=2014)
{ hyundai_data$market_code2<-substr(hyundai_data$Placement,1,3)
} else {
if(hyundai_data$Year=2015)
{hyundai_data$market_code2<-substr(hyundai_data$Placement,1,3)
} else {hyundai_data$market_code2<-"NA"}
library(sqldf)
hyundai$Date<-as.Date(hyundai$Date)
hyundai_Data$Date<-as.Date(hyundai$Date)
hyundai_data$Date<-as.Date(hyundai_data$Date)
class(hyundai_data$Date)
head(year(hyundai_data$Date))
hyundai_data$date2 <- format(hyundai_data$Date,%Y)
hyundai_data$date2 <- format(hyundai_data$Date,"%Y")
View(hyundai_data)
View(hyundai_data)
View(hyundai_data)
hyundai_data <- read.csv(file="hyundai_data.csv")
class(hyundai_data$Date)
hyundai$Date <- strptime(
hyundai$Date
, "%m-%d-%Y"
)
hyundai_data$Date <- strptime(
hyundai_data$Date
, "%m-%d-%Y"
)
View(hyundai_data)
hyundai_data <- read.csv(file="hyundai_data.csv")
View(hyundai_data)
hyundai_data$Date<-as.POSIXct(hyundai_data$Date,format="%m/%d/%Y")
View(hyundai_data)
hyundai_data <- read.csv(file="hyundai_data.csv")
class(hyundai_data$Date)
hyundai_data$Date <- strptime(
hyundai_data$Date
, "%m/%d/%Y"
)
class(hyundai_data$Date)
head(year(hyundai_data$Date))
head(year(hyundai_data$Date))
head(format(hyundai_data$Date,"%Y"))
hyundai_data <- read.csv(file="hyundai_data.csv")
hyundai_data$Date<-as.POSIXct(hyundai_data$Date,format="%m/%d/%Y")
class(hyundai_data$Date)
head(format(hyundai_data$Date,"%Y"))
hyundai_data <- read.csv(file="hyundai_data.csv")
hyundai_data$Date<-as.POSIXlt(hyundai_data$Date,format="%m/%d/%Y")
class(hyundai_data$Date)
head(format(hyundai_data$Date,"%Y"))
if(format(hyundai_data$Date,"%Y")=2014)
{ hyundai_data$market_code2<-substr(hyundai_data$Placement,1,3)
} else {
if(format(hyundai_data$Date,"%Y")=2015)
{hyundai_data$market_code2<-substr(hyundai_data$Placement,1,3)
}
if(hyundai_data$Year=2014)
{ hyundai_data$market_code2<-substr(hyundai_data$Placement,1,3)
} else {
if(hyundai_data$Year=2015)
{hyundai_data$market_code2<-substr(hyundai_data$Placement,1,3)
}
head(format(hyundai_data$Date,"%Y"))
format(hyundai_data$Date,"%Y")
if(format(hyundai_data$Date,"%Y")=2014)
{ hyundai_data$market_code2<-substr(hyundai_data$Placement,1,3)
} else {
if(hyundai_data$Year=2015)
{hyundai_data$market_code2<-substr(hyundai_data$Placement,1,3)
}
if(format(hyundai_data$Date,"%Y")="2014")
{ hyundai_data$market_code2<-substr(hyundai_data$Placement,1,3)
} else {
if(hyundai_data$Year=2015)
{hyundai_data$market_code2<-substr(hyundai_data$Placement,1,3)
}
if(format(hyundai_data$Date,"%Y")="2014")
{ hyundai_data$market_code2<-substr(hyundai_data$Placement,1,3)
} else {
if(hyundai_data$Year=2015)
{hyundai_data$market_code2<-substr(hyundai_data$Placement,1,3)
}
if(format(hyundai_data$Date,"%Y")="2014")
{ hyundai_data$market_code2<-substr(hyundai_data$Placement,1,3)
}
if(format(hyundai_data$Date,"%Y")="2014")
{ hyundai_data$market_code2<-substr(hyundai_data$Placement,1,3)
} else {
if(hyundai_data$Year=2015)
{hyundai_data$market_code2<-substr(hyundai_data$Placement,1,3)
}
if(hyundai_data$Year=2014)
{ hyundai_data$market_code2<-substr(hyundai_data$Placement,1,3)
} else {
if(hyundai_data$Year=2015)
{hyundai_data$market_code2<-substr(hyundai_data$Placement,1,3)
}
if(hyundai_data$Year=2014)
{ hyundai_data$market_code2<-substr(hyundai_data$Placement,1,3)
} else {
if(hyundai_data$Year=2015)
{hyundai_data$market_code2<-substr(hyundai_data$Placement,1,3)
} }
if(hyundai_data$Year=2014)
{ hyundai_data$market_code2<-substr(hyundai_data$Placement,1,3)
} else {
if(hyundai_data$Year=2015)
{hyundai_data$market_code2<-substr(hyundai_data$Placement,1,3)
}
class(hyundai_data$Date)
if(hyundai_data$Year=2014)
{ hyundai_data$market_code2<-substr(hyundai_data$Placement,1,3)
} else {
if(hyundai_data$Year=2015)
{hyundai_data$market_code2<-substr(hyundai_data$Placement,1,3)
}
if(hyundai_data$Year="2014")
{ hyundai_data$market_code2<-substr(hyundai_data$Placement,1,3)
} else {
if(hyundai_data$Year=2015)
{hyundai_data$market_code2<-substr(hyundai_data$Placement,1,3)
}
# requires exception handling by year
if(hyundai_data$Year="2014")
{ hyundai_data$market_code2<-substr(hyundai_data$Placement,1,3)
} else {
if(hyundai_data$Year="2015")
{hyundai_data$market_code2<-substr(hyundai_data$Placement,1,3)
}
if(hyundai_data$Year="2014")
{ hyundai_data$market_code2<-substr(hyundai_data$Placement,1,3)
} else { hyundai_data$market_code2<-substr(hyundai_data$Placement,1,3)
}
if(hyundai_data$Year=="2014")
{ hyundai_data$market_code2<-substr(hyundai_data$Placement,1,3)
} else { hyundai_data$market_code2<-substr(hyundai_data$Placement,1,3)
}
if(hyundai_data$Year==2014)
{ hyundai_data$market_code2<-substr(hyundai_data$Placement,1,3)
} else { hyundai_data$market_code2<-substr(hyundai_data$Placement,1,3)
}
if(hyundai_data$Year=='2014')
{ hyundai_data$market_code2<-substr(hyundai_data$Placement,1,3)
} else { hyundai_data$market_code2<-substr(hyundai_data$Placement,1,3)
}
if(hyundai_data$Year=2014)
{ hyundai_data$market_code2<-substr(hyundai_data$Placement,1,3)
} else { hyundai_data$market_code2<-substr(hyundai_data$Placement,1,3)
}
if(hyundai_data$Year==2014){
hyundai_data$market_code2 <- substr(hyundai_data$Placement,1,3)
} else {
if(hyundai_data$Year==2015){
hyundai_data$market_code2 <- substr(hyundai_data$Placement,1,3)
} else {
hyundai_data$market_code2 <- "NA"
}
}
hyundai_data$Year==2014
if(hyundai_data$Year==2014){
hyundai_data$market_code2 <- substr(hyundai_data$Placement,1,3)
}
---
title: "Tufte Handout"
author: "John Smith"
---
title: "Tufte Handout"
author: "John Smith"
date: "August 13th, 2014"
output: rmarkdown::tufte_handout
---
# Introduction
The Tufte-\LaTeX\ [^tufte_latex] document classes define a style similar to the style Edward Tufte uses in his books and handouts. Tufte’s style is known for its extensive use of sidenotes, tight integration of graphics with text, and well-set typography.
# Headings
This style provides a- and b-heads (that is, `#` and `##`), demonstrated above.
An error is emitted if you try to use `###` and smaller headings.
\newthought{In his later books}[^books_be], Tufte starts each section with a bit of vertical space, a non-indented paragraph, and sets the first few words of the sentence in small caps. To accomplish this using this style, use the `\newthought` command as demonstrated at the beginning of this paragraph.
# Figures
## Margin Figures
Images and graphics play an integral role in Tufte's work. To place figures or tables in the margin you can use the `fig.margin` knitr chunk option. For example:
```{r, fig.margin = TRUE, fig.cap = "Sepal length vs. petal length, colored by species"}
library(ggplot2)
qplot(Sepal.Length, Petal.Length, data = iris, color = Species)
```
Note the use of the `fig.cap` chunk option to provide a figure caption. You can adjust the proportions of figures using the `fig.width` and `fig.height` chunk options. These are specified in inches, and will be automatically scaled down to fit within the handout margin.
## Equations
You can also include \LaTeX\ equations in the margin by explicitly invoking the `marginfigure` environment.
\begin{marginfigure}
$$\frac{d}{dx}\left( \int_{0}^{x} f(u)\,du\right)=f(x).$$
\caption{An equation}
\end{marginfigure}
Note the use of the `\caption` command to add additional text below the equation.
## Full Width Figures
You can arrange for figures to span across the entire page by using the `fig.fullwidth` chunk option.
```{r, fig.width = 10, fig.height = 2, fig.fullwidth = TRUE, fig.cap = "Full width figure"}
qplot(wt, mpg, data=mtcars, colour=factor(cyl))
```
Note the use of the `fig.width` and `fig.height` chunk options to establish the proportions of the figure. Full width figures look much better if their height is minimized.
## Main Column Figures
Besides margin and full width figures, you can of course also include figures constrained to the main column.
```{r, fig.cap = "Another figure"}
qplot(factor(cyl), mpg, data = mtcars, geom = "boxplot")
```
# Sidenotes
One of the most prominent and distinctive features of this style is the extensive use of sidenotes. There is a wide margin to provide ample room for sidenotes and small figures. Any use of a footnote will automatically be converted to a sidenote. ^[This is a sidenote that was entered using a footnote.]
If you'd like to place ancillary information in the margin without the sidenote mark (the superscript number), you can use the `\marginnote` command. \marginnote{This is a margin note.  Notice that there isn't a number preceding the note.}
Note also that the two footnote references (`tufte_latex` and `books_be`, both defined below) were also included in the margin on the first page of this document.
# Tables
You can use the **xtable** package to format \LaTeX\ tables that integrate well with the rest of the Tufte handout style. Note that it's important to set the `xtable.comment` and `xtable.booktabs` options as shown below to ensure the table is formatted correctly for inclusion in the document.
```{r, results='asis'}
library(xtable)
options(xtable.comment = FALSE)
options(xtable.booktabs = TRUE)
xtable(head(mtcars[,1:6]), caption = "First rows of mtcars")
```
[^tufte_latex]: https://code.google.com/p/tufte-latex/
[^books_be]: http://www.edwardtufte.com/tufte/books_be
?pandoc
install.packages("pandoc")
a<-read.txt(test_query.txt)
a<-readChar('test_query.txt', file.info(fileName)$size)
a<-readChar('test_query.txt', file.info('test_query.txt')$size)
query<-readChar('action_report_query.sql', file.info('action_report_query.sql')$size)
query<-readChar('action report query.sql', file.info('action report query.sql')$size)
rm(query)
query<-readChar('action report query.sql', file.info('action report query.sql')$size)
rm(query)
pdflatex -v
rm(sites_by_ctr)
campaign_id <- "55629"
ctr_threshold <- .005
## 52673 51513
sites_by_ctr_query <-("select line_item_id
, period
, refresh_time
, description as siet
, sum(views) as impressiosn
, sum(clicks) as clicks
from campaign_insights_new
where campaign_id = %s
and feature = 'site'
and description <> '_TOTAL_'
group by line_item_id
, period
, refresh_time
, description")
library(RODBC)
conn <- odbcConnect("modeling db")
sites_by_ctr <- sqlQuery(conn, sprintf(sites_by_ctr_query, campaign_id))
View(sites_by_ctr)
rm(sites_by_ctr)
campaign_id <- "55629"
ctr_threshold <- .005
## 52673 51513
sites_by_ctr_query <-("select line_item_id
, period
, refresh_time
, description as siet
, sum(views) as impressiosn
, sum(clicks) as clicks
from campaign_insights_new
where campaign_id = %s
and feature = 'site'
and description <> '_TOTAL_'
group by line_item_id
, period
, refresh_time
, description")
library(RODBC)
conn <- odbcConnect("modeling db")
sites_by_ctr <- sqlQuery(conn, sprintf(sites_by_ctr_query, campaign_id))
View(sites_by_ctr)
query <-'select if(datediff(max(date),curdate())<-3,'not updated','updated') as is_updated From rfi_test.jh_monthly_mobile_product'
?readchar
??readchar
query <- readchar(select if(datediff(max(date),curdate())<-3,'not updated','updated') as is_updated From rfi_test.jh_monthly_mobile_product)
query <- readchar('select if(datediff(max(date),curdate())<-3,'not updated','updated') as is_updated From rfi_test.jh_monthly_mobile_product')
a <- readchar('select if(datediff(max(date),curdate())<-3,'not updated','updated') as is_updated From rfi_test.jh_monthly_mobile_product')
a <- "readchar("'select if(datediff(max(date),curdate())<-3,'not updated','updated') as is_updated From rfi_test.jh_monthly_mobile_product"
a <- "select if(datediff(max(date),curdate())<-3,'not updated','updated') as is_updated From rfi_test.jh_monthly_mobile_product"
a <- ("select if(datediff(max(date),curdate())<-3,'not updated','updated') as is_updated From rfi_test.jh_monthly_mobile_product")
a <- (select if(datediff(max(date),curdate())<-3,'not updated','updated') as is_updated From rfi_test.jh_monthly_mobile_product)
a <- ('select if(datediff(max(date),curdate())<-3,'not updated','updated') as is_updated From rfi_test.jh_monthly_mobile_product')
a <- ("select if(datediff(max(date),curdate())<-3,'not updated','updated') as is_updated From rfi_test.jh_monthly_mobile_product"")
a <- ("select if(datediff(max(date),curdate())<-3,'not updated','updated') as is_updated From rfi_test.jh_monthly_mobile_product")
"
"
a <- ("select if(datediff(max(date),curdate())<-3,'not updated','updated') as is_updated From rfi_test.jh_monthly_mobile_product")
a
conn <- odbcConnect("rfi_meta_data")
query <- ("select if(datediff(max(date),curdate())<=-4,'not updated','updated') as is_updated From rfi_test.jh_monthly_mobile_product")
query <- ("select if(datediff(max(date),curdate())<=-4,'not updated','updated') as is_updated From rfi_test.jh_monthly_mobile_product")
library(RODBC)
conn <- odbcConnect("rfi_meta_data")
results <- sqlQuery(conn, sprintf(sites_by_ctr_query, campaign_id))
library(RODBC)
conn <- odbcConnect("rfi_meta_data")
results <- sqlQuery(conn, query)
is_updated<- sqlQuery(conn, query)
print(is_updated)
rm is_updated
`query_result.(25)` <- read.csv("C:/Users/john/Downloads/query_result (25).csv")
View(`query_result.(25)`)
View(`query_result.(25)`)
data<-`query_result.(25)`
rm(`query_result.(25)`)
View(data)
summary(data)
queryresults <- sqldf(select * from data where ctr > 0.0005 order by ctr desc
queryresults <- sqldf(select * from data where ctr > 0.0005 order by ctr desc)
library(sqldf)
queryresults <- sqldf('select * from data where ctr > 0.0005 order by ctr desc')
View(queryresults)
queryresults <- sqldf('select * from data where ctr > 0.0005 and impressions > 100 order by ctr desc')
View(queryresults)
queryresults <- sqldf('select * from data where ctr > 0.0005 and impressions > 100 and lineitem = 'MOBILE/TABLET: Geo-Marked Deal Seekers in Deal Content' order by ctr desc')
queryresults <- sqldf('select * from data where ctr > 0.0005 and impressions > 100 and lineitem = /'MOBILE/TABLET: Geo-Marked Deal Seekers in Deal Content/' order by ctr desc')
queryresults <- sqldf('select * from data where ctr > 0.0005 and impressions > 100 and lineitem = MOBILE/TABLET: Geo-Marked Deal Seekers in Deal Content order by ctr desc')
queryresults <- sqldf('select * from data where ctr > 0.0005 and impressions > 100 and lineitem = "MOBILE/TABLET: Geo-Marked Deal Seekers in Deal Content" order by ctr desc')
View(queryresults)
queryresults <- sqldf('select * from data where ctr > 0.0008 and impressions > 100 and lineitem = "MOBILE/TABLET: Geo-Marked Deal Seekers in Deal Content" order by ctr desc')
View(queryresults)
queryresults <- sqldf('select count(*),sum(impressions) from data where ctr > 0.0008 and impressions > 100 and lineitem = "MOBILE/TABLET: Geo-Marked Deal Seekers in Deal Content" order by ctr desc')
View(queryresults)
queryresults <- sqldf('select if(sum(impressions)<1000,"little","big"),count(*),sum(impressions) from data where ctr > 0.0008 and impressions > 100 and lineitem = "MOBILE/TABLET: Geo-Marked Deal Seekers in Deal Content" order by ctr desc')
queryresults <- sqldf('select count(*),sum(impressions) from data where ctr > 0.0008 and impressions > 100 and lineitem = "MOBILE/TABLET: Geo-Marked Deal Seekers in Deal Content" order by ctr desc')
View(Y_new)
View(Y_new)
View(queryresults)
queryresults <- sqldf('select * from data where ctr > 0.0008 and impressions > 100 and lineitem = "MOBILE/TABLET: Geo-Marked Deal Seekers in Deal Content" order by ctr desc')
View(queryresults)
queryresults <- sqldf('select clean_site from data where ctr > 0.0008 and impressions > 100 and lineitem = "MOBILE/TABLET: Geo-Marked Deal Seekers in Deal Content" order by ctr desc')
View(queryresults)
write.csv(queryresults,file ="C:\Users\john\Downloads\best_buy_block.csv" )
write.csv(queryresults,file ="C:/Users/john/Downloads/best_buy_block.csv" )
action_report
head(action_report, 10)
